<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Minhas Tarefas</title>
</head>
<body>
    <h1>Minhas Tarefas</h1>

    <button onclick="carregarTarefas()">Recarregar Lista</button>
    <ul id="lista-tarefas"></ul>

    <script>
        const API_URL = "http://localhost:5000/tasks";

        async function carregarTarefas() {
            const resp = await fetch(API_URL);
            const tasks = await resp.json();

            const lista = document.getElementById("lista-tarefas");
            lista.innerHTML = "";

            tasks.forEach(task => {
                const li = document.createElement("li");
                li.innerHTML = `
                    <b>${task.title}</b> - ${task.status}
                    <button onclick="atualizarStatus(${task.id})">Concluir/Reabrir</button>
                    <button onclick="excluirTarefa(${task.id})">Excluir</button>
                `;
                lista.appendChild(li);
            });
        }

        async function atualizarStatus(id) {
            await fetch(`${API_URL}/${id}`, {
                method: "PUT",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ status: "Conclu√≠do" }) 
            });
            carregarTarefas();
        }

        async function excluirTarefa(id) {
            await fetch(`${API_URL}/${id}`, { method: "DELETE" });
            carregarTarefas();
        }

        carregarTarefas();
    </script>
</body>
</html>
